import{r as n,j as e,S as v,a as S,P as B,T as t,C as N,d as w,e as C}from"./index-BwQ9_pH1.js";import{c as F}from"./productService-Bt3BsnKr.js";const A={},E="_status_16l78_38",I="_statusNotBtn_16l78_44",L="_statusYesBtn_16l78_56",M="_actionButton_16l78_68",o={"security-page-table-head":"_security-page-table-head_16l78_1","security-page-table":"_security-page-table_16l78_1",status:E,statusNotBtn:I,statusYesBtn:L,actionButton:M},z=()=>{const[i,u]=n.useState([]),[c,g]=n.useState(""),[y,h]=n.useState(!1),[x,j]=n.useState(null),[l,T]=n.useState(1),[d]=n.useState(7),[f,_]=n.useState(1);if(n.useEffect(()=>{(async()=>{var s;h(!0),j(null);try{const r=await F(l,d);_(((s=r.data.meta)==null?void 0:s.totalPages)||Math.ceil(r.data.records.length/d)),u(r.data.records)}catch(r){j("Failed to load products"),console.error(r),u([])}finally{h(!1)}})()},[l,d]),y)return e.jsx(v,{});if(x)return e.jsxs("div",{children:["Error: ",x]});const b=a=>{switch(a){case"pending":return"В ожидании";case"completed":return"Принят";case"completing":return"Завершение";case"published":return"Опубликовано";case"not_happened":return"Не завершен";case"not_won":return"Не выиграно";case"cancelled":return"Отменен";default:return"Неизвестно"}},m=a=>{switch(a){case"directPurchase":return"Прямой платеж";default:return"Неизвестно"}},P=()=>{const a=c?i.filter(s=>s.status===c):i;return Array.isArray(a)?a.map(s=>{var r,p;return e.jsxs(t.Tr,{children:[e.jsx(t.Td,{children:s.announcementNumber}),e.jsx(t.Td,{children:((r=s.user)==null?void 0:r.firstName)??"Неизвестно"}),e.jsx(t.Td,{className:o.statusRow,children:b(s.status)}),e.jsx(t.Td,{children:s.cartItems[0].product?e.jsx("a",{href:`/product/${(p=s.cartItems[0].product)==null?void 0:p.id}`,children:"смотреть"}):"нет продукта"}),e.jsx(t.Td,{children:m(s.type)}),e.jsx(t.Td,{children:s.deliveryAdress}),e.jsxs(t.Td,{children:[s.deliveryPrice,"₸"]}),e.jsxs(t.Td,{style:{textAlign:"end"},children:[new Intl.NumberFormat("en-KZ").format(s.amountPrice),"₸"]})]},s.id)}):null};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:o["security-page-table-head"],children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Поиск"}),e.jsx(S,{placeholder:"Статус",value:c,data:[{value:"",label:"Все"},{value:"active",label:"Разрешено"},{value:"pending",label:"В ожидании"},{value:"inactive",label:"Отклонено"}],onChange:a=>g(a)})]}),e.jsx(B,{page:l,totalPages:f,onPageChange:a=>T(a)})]}),e.jsx("div",{className:o["security-page-table"],children:e.jsxs(t,{stickyHeader:!0,children:[e.jsx(t.Thead,{children:e.jsxs(t.Tr,{children:[e.jsx(t.Th,{children:"Номер заказа"}),e.jsx(t.Th,{children:"Покупатель"}),e.jsx(t.Th,{children:"Статус"}),e.jsx(t.Th,{children:"Продукт"}),e.jsx(t.Th,{children:"Оплата"}),e.jsx(t.Th,{children:"Доставка"}),e.jsx(t.Th,{children:"Цена доставки"}),e.jsx(t.Th,{style:{textAlign:"end"},children:"Цена"})]})}),e.jsx(t.Tbody,{children:P()})]})})]})},R=()=>e.jsx(N,{className:A["withdraws-page"],header:e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Мои Заказы"}),e.jsx(C,{})]}),children:e.jsx("div",{children:e.jsx(z,{})})});export{R as default};
