import{r as n,v as $,x as k,y as F,j as t,q as O,G as V,Z as B,_ as U,H as q,K as H,h as K,n as L,S as M,i as J}from"./index-BwQ9_pH1.js";import{l as G}from"./productService-Bt3BsnKr.js";import{C as Q,A as T,a as W}from"./CatalogFilters-VLzH3msv.js";import"./index-DTkkQkBg.js";import"./clamp-DTmYCdls.js";const Z=n.createContext(null),X=Z.Provider;function Y(){return{withinGroup:!!n.useContext(Z)}}var _={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const tt={},et=V((a,{spacing:e})=>({group:{"--ag-spacing":B(e)}})),b=$((a,e)=>{const s=k("AvatarGroup",tt,a),{classNames:r,className:h,style:d,styles:i,unstyled:u,vars:m,spacing:o,...l}=s,j=F({name:"AvatarGroup",classes:_,props:s,className:h,style:d,classNames:r,styles:i,unstyled:u,vars:m,varsResolver:et,rootSelector:"group"});return t.jsx(X,{value:!0,children:t.jsx(O,{ref:e,...j("group"),...l})})});b.classes=_;b.displayName="@mantine/core/AvatarGroup";function at(a){return t.jsx("svg",{...a,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function D(a,e=2){const s=a.split(" ");return s.length===1?a.slice(0,e).toUpperCase():s.map(r=>r[0]).slice(0,e).join("").toUpperCase()}function st(a){let e=0;for(let s=0;s<a.length;s+=1){const r=a.charCodeAt(s);e=(e<<5)-e+r,e|=0}return e}const rt=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function ot(a,e=rt){const s=st(D(a)),r=Math.abs(s)%e.length;return e[r]}const nt={},lt=V((a,{size:e,radius:s,variant:r,gradient:h,color:d,autoContrast:i,name:u,allowedInitialsColors:m})=>{const o=d==="initials"&&typeof u=="string"?ot(u,m):d,l=a.variantColorResolver({color:o||"gray",theme:a,gradient:h,variant:r||"light",autoContrast:i});return{root:{"--avatar-size":q(e,"avatar-size"),"--avatar-radius":s===void 0?void 0:H(s),"--avatar-bg":o||r?l.background:void 0,"--avatar-color":o||r?l.color:void 0,"--avatar-bd":o||r?l.border:void 0}}}),A=U((a,e)=>{const s=k("Avatar",nt,a),{classNames:r,className:h,style:d,styles:i,unstyled:u,vars:m,src:o,alt:l,radius:j,color:w,gradient:S,imageProps:p,children:v,autoContrast:E,mod:N,name:C,allowedInitialsColors:P,...y}=s,c=Y(),[g,x]=n.useState(!o),f=F({name:"Avatar",props:s,classes:_,className:h,style:d,classNames:r,styles:i,unstyled:u,vars:m,varsResolver:lt});return n.useEffect(()=>x(!o),[o]),t.jsx(O,{...f("root"),mod:[{"within-group":c.withinGroup},N],ref:e,...y,children:g?t.jsx("span",{...f("placeholder"),title:l,children:v||typeof C=="string"&&D(C)||t.jsx(at,{})}):t.jsx("img",{...p,...f("image"),src:o,alt:l,onError:z=>{var R;x(!0),(R=p==null?void 0:p.onError)==null||R.call(p,z)}})})});A.classes=_;A.displayName="@mantine/core/Avatar";A.Group=b;const ct="_catalogItem_cfj3r_29",I={"catalog-page":"_catalog-page_cfj3r_1","catalog-title":"_catalog-title_cfj3r_11","catalog-description":"_catalog-description_cfj3r_15","catalog-tenders":"_catalog-tenders_cfj3r_20",catalogItem:ct},ft=()=>{var C,P,y;const[a,e]=n.useState("3_months"),[s,r]=n.useState(!1),[h,d]=n.useState(0),[i,u]=n.useState([]),[m,o]=n.useState(!0),[l,j]=n.useState(null),[w,S]=n.useState(!1),p=K(),{id:v}=L();n.useEffect(()=>{(async()=>{try{o(!0);const g=await J();d(g);const x=g.id;let f;g.role!=="admin"?f=await G(x):v&&!isNaN(Number(v))?f=await G(v):f=await G(x),u(f.data.records)}catch(g){j(`Failed to load vendor data: ${g instanceof Error?g.message:"Unknown error"}`)}finally{o(!1)}})()},[v]);const E=()=>S(!0),N=()=>r(!0);return m?t.jsx(M,{}):l?t.jsxs("p",{children:["Error: ",l]}):t.jsxs("div",{className:I["catalog-page"],children:[t.jsxs(t.Fragment,{children:[t.jsx(A,{w:100,h:100}),t.jsx("p",{children:(C=i[0])==null?void 0:C.firstName})]}),t.jsx(Q,{isAdmin:!1,onFilterChange:e,addCatalog:E,addProduct:N,filterPeriod:a}),t.jsx("div",{className:I["catalog-tenders"],children:i.length>0?(y=(P=i[0])==null?void 0:P.vendorGroups)==null?void 0:y.map(c=>t.jsxs("div",{onClick:()=>p(`/product/${c.product.id}`),className:I.catalogItem,children:[t.jsx("img",{src:c.product.images&&c.product.images.length>0?c.product.images[0].url.replace("http://3.76.32.115:3000","https://api.arbr.kz"):t.jsx(M,{width:200,height:200,radius:300}),alt:c.product.name||"Product image"}),t.jsx("p",{children:c.product.name})]},c.id)).reverse():t.jsx("p",{children:"Нет доступных товаров"})}),w&&t.jsx(T,{isOpen:w,onClose:()=>S(!1)}),s&&t.jsx(W,{profileData:h,isAdmin:!1,isOpen:s,onClose:()=>r(!1)})]})};export{ft as default};
