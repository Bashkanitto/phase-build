import{o as _,r as a,j as s,I as p,B as g,u as v,g as b,s as N,h as S,b as w}from"./index-BwQ9_pH1.js";const P="_container_1qcnp_1",C="_formScroller_1qcnp_10",F="_formWrapper_1qcnp_15",q="_authForm_1qcnp_27",I="_error_1qcnp_38",B="_forgetPassword_1qcnp_51",k="_finishForm_1qcnp_58",W="_passwordWrapper_1qcnp_78",E="_showPasswordButton_1qcnp_82",i={container:P,formScroller:C,formWrapper:F,authForm:q,error:I,forgetPassword:B,finishForm:k,passwordWrapper:W,showPasswordButton:E},R="_resetForm_1ad7a_1",$="_error_1ad7a_26",D="_forgetPassword_1ad7a_35",x={resetForm:R,error:$,forgetPassword:D},L=_(({onNext:u,onBack:h})=>{const[r,m]=a.useState(""),[e,n]=a.useState(""),[c,l]=a.useState(!1),[t,o]=a.useState(null),j=async d=>{if(d.preventDefault(),o(null),r!==e){o("Пароли не совпадают");return}l(!0);try{await v(r),u()}catch(y){o(y.message||"Произошла ошибка.")}finally{l(!1)}};return s.jsxs("form",{className:x.resetForm,onSubmit:j,children:[s.jsxs("div",{children:[s.jsxs("h4",{children:["Введите новый пароль"," ",s.jsx("button",{type:"button",onClick:h,children:"Назад"})]}),s.jsx("p",{children:"Введите новый пароль"})]}),s.jsxs("div",{children:[t&&s.jsx("p",{style:{margin:0},className:x.error,children:t}),s.jsx(p,{onChange:d=>m(d.target.value),value:r,name:"password",placeholder:"Введите пароль",required:!0}),s.jsx(p,{onChange:d=>n(d.target.value),value:e,name:"confirmPassword",placeholder:"Подтвердите пароль",required:!0}),s.jsx(g,{disabled:c||!r||!e,type:"submit",variantColor:"primary",children:c?"Обновление...":"Подтвердить"})]})]})}),O="_footerItem_1d8by_12",A="_number_1d8by_16",G="_socileIcons_1d8by_19",f={footerItem:O,number:A,socileIcons:G},X=()=>s.jsxs("footer",{children:[s.jsxs("div",{className:f.footerItem,children:[s.jsx("h3",{children:"Есть вопросы?"}),s.jsx("p",{children:"Звоните и мы с радостью на них ответим"}),s.jsx("p",{className:f.number,children:"+7 800 707 22 03"})]}),s.jsxs("div",{className:f.footerItem,children:[s.jsx("h3",{children:"Соц сети"}),s.jsx("p",{children:"Подписывайтесь на наш канал и будьте в курсе последних новостей."}),s.jsxs("div",{className:f.socileIcons,children:[s.jsx("a",{href:"https://youtube.com/",children:s.jsx("img",{src:"/images/youtube_photo.png",alt:""})}),s.jsx("a",{href:"https://t.me/c/2228400264/2",children:s.jsx("img",{src:"/images/vk_photo.png",alt:""})})]})]}),s.jsxs("div",{className:f.footerItem,children:[s.jsx("h3",{children:"Мобильное приложение"}),s.jsx("p",{children:"Скачайте наше мобильное приложение для удобства. Всегда под рукой, всегда рядом"}),s.jsx("a",{href:"https://youtube.com/"}),s.jsx("a",{href:"https://t.me/c/2228400264/2"})]})]}),z=_(({onNext:u,onBack:h})=>{const[r,m]=a.useState(""),[e,n]=a.useState(!1),[c,l]=a.useState(null),t=async o=>{o.preventDefault(),l(null),n(!0);try{await b(r),u()}catch{l("Неправильный код или истекшая сессия.")}finally{n(!1)}};return s.jsxs("form",{className:x.resetForm,onSubmit:t,children:[s.jsxs("div",{children:[s.jsxs("h4",{children:["Введите код"," ",s.jsx("button",{type:"button",onClick:h,children:"Назад"})]}),s.jsx("p",{children:"Введите код, который мы вам отправили на ваш адрес"})]}),c&&s.jsx("p",{className:x.error,children:c}),s.jsxs("div",{children:[s.jsx(p,{onChange:o=>m(o.target.value),value:r,name:"otp",placeholder:"Введите код",required:!0}),s.jsx(g,{disabled:e,type:"submit",variantColor:"primary",children:e?"Проверка...":"Подтвердить"})]})]})}),H=_(({onNext:u,onBack:h})=>{const[r,m]=a.useState(""),[e,n]=a.useState(!1),[c,l]=a.useState(null),t=async o=>{o.preventDefault(),l(null),n(!0);try{await N(r),u()}catch{l("Не удалось отправить код. Проверьте адрес почты.")}finally{n(!1)}};return s.jsxs("form",{className:x.resetForm,onSubmit:t,children:[s.jsxs("div",{children:[s.jsxs("h4",{children:["Сброс пароля"," ",s.jsx("button",{type:"button",onClick:h,children:"Назад"})]}),s.jsxs("p",{children:["Введите адрес, на который мы вам",s.jsx("br",{}),"отправим код ."]})]}),c&&s.jsx("p",{className:x.error,children:c}),s.jsxs("div",{children:[s.jsx(p,{onChange:o=>m(o.target.value),value:r,name:"email",placeholder:"Ваша почта",required:!0}),s.jsx(g,{disabled:e||!r,type:"submit",variantColor:"primary",children:e?"Отправка...":"Отправить код"})]})]})}),K=_(()=>{const u=S(),[h,r]=a.useState(null),[m,e]=a.useState(1),[n,c]=a.useState(!1);async function l(t){t.preventDefault(),r(null);const o=t.target.identifier.value,j=t.target.password.value;try{await w.login(o,j),w.isLoggedIn&&u("/managers")}catch(d){d.status&&r(d.message="Ошибка на сервере, попробуйте позже"),r(d.message="Неправильные данные для входа")}}return s.jsxs("div",{className:i.container,children:[s.jsx("div",{className:i.formWrapper,style:{height:m==1?"400px":"320px"},children:s.jsxs("div",{className:i.formScroller,style:{transform:`translateX(-${(m-1)*480}px)`},children:[s.jsxs("form",{className:i.authForm,onSubmit:t=>l(t),children:[s.jsx("h4",{children:"Авторизация"}),s.jsx("p",{children:"Введите ваш номер телефона для входа в личный кабинет."}),h&&s.jsx("p",{className:i.error,children:h}),s.jsx(p,{className:i.inputs,name:"identifier",placeholder:"Ваша Почта"}),s.jsxs("div",{className:i.passwordWrapper,children:[s.jsx(p,{className:i.inputs,name:"password",placeholder:"Ваш Пароль",type:n?"text":"password"}),s.jsx("button",{type:"button",className:i.showPasswordButton,onClick:()=>c(t=>!t),children:n?"Скрыть":"Показать"})]}),s.jsx("a",{onClick:()=>e(2),className:i.forgetPassword,children:"Забыли пароль?"}),s.jsx(g,{type:"submit",variantColor:"primary",children:w.loading?"Вход...":"Войти"})]}),s.jsx(H,{onNext:()=>e(3),onBack:()=>e(1)}),s.jsx(z,{onNext:()=>e(4),onBack:()=>e(2)}),s.jsx(L,{onNext:()=>e(1),onBack:()=>e(3)})]})}),s.jsx(X,{})]})});export{K as default};
