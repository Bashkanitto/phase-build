import{j as e,r as c,M as I,k as f,U as L,l as B,S as P,a8 as R,a9 as F,aa as z,ab as O,ac as W,ad as U,ae as A,af as H,ag as q,h as G,a as w,B as J,T as n,O as b,ah as K,f as Q,E as V,D as X,c as Y,C as Z,ai as g,d as ee,e as se}from"./index-BwQ9_pH1.js";const te=s=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:e.jsx("path",{d:"M12 5C7 5 3.73 8.11 2 12c1.73 3.89 5 7 10 7s8.27-3.11 10-7c-1.73-3.89-5-7-10-7zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z",fill:"#6366F1"})}),ae=({isOpen:s,onClose:o,item:l,onSave:u})=>{const[d,j]=c.useState(l),r=(h,_)=>{j(p=>({...p,[h]:_}))},x=()=>{u(d),o()};return e.jsxs(I,{opened:s,onClose:o,title:"Edit Item",children:[e.jsx(f,{label:"Customer",value:d.customer,onChange:h=>r("customer",h.target.value)}),e.jsx(f,{label:"Sum",value:d.sum,onChange:h=>r("sum",h.target.value)}),e.jsx(L,{onClick:x,children:"Save Changes"})]})},ne=async()=>{try{return await B.get("/balance/logs")}catch(s){throw console.error("Error fetching operations:",s),new Error(`Failed to fetch operations: ${s instanceof Error?s.message:"Unknown error"}`)}},le="_container_1uf8s_1",re="_date_1uf8s_7",ie="_title_1uf8s_13",oe="_transaction_1uf8s_20",ce="_avatar_1uf8s_28",de="_details_1uf8s_36",he="_subtitle_1uf8s_41",ue="_amount_1uf8s_46",xe="_amountPositive_1uf8s_50",me="_amountNegative_1uf8s_54",i={container:le,date:re,title:ie,transaction:oe,avatar:ce,details:de,subtitle:he,amount:ue,amountPositive:xe,amountNegative:me},je=()=>{const[s,o]=c.useState([]),[l,u]=c.useState(!0),[d,j]=c.useState(null);return c.useEffect(()=>{(async()=>{try{const x=await ne();o(x.data.records)}catch(x){console.error(x),j("Не удалось загрузить операции.")}finally{u(!1)}})()},[]),l?e.jsx(P,{}):d?e.jsx("div",{className:i.container,children:d}):e.jsxs("div",{className:i.container,children:[e.jsx("h2",{className:i.title,children:"Операции"}),s.length===0?e.jsx("p",{className:i.noTransactions,children:"Нет операций для отображения."}):s.map(r=>e.jsxs("div",{className:i.transaction,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{className:i.avatar}),e.jsxs("div",{children:[e.jsxs("div",{className:i.details,children:["Номер ",r.id]}),e.jsx("div",{className:i.subtitle,children:"Контрагент"})]})]}),e.jsx("div",{className:`${i.amount} ${r.amount>0?i.amountPositive:i.amountNegative}`,children:r.amount>0?`+ ${r.amount} ₸`:`- ${Math.abs(r.amount)} ₸`})]},r.id))]})},ge="_container_iealm_1",_e="_title_iealm_7",pe="_nameRole_iealm_15",ve="_list_iealm_20",fe="_row_iealm_26",we="_name_iealm_15",be="_role_iealm_41",Ce="_profileLink_iealm_46",C={container:ge,title:_e,nameRole:pe,list:ve,row:fe,name:we,role:be,profileLink:Ce};R.register(F,z,O,W,U,A,H);const Se=()=>{const l={labels:["Янв","Фев","Март","Апр","Май"],datasets:[{data:[12,19,3,5,2],fill:!1,borderColor:"rgb(75, 192, 192)"}]},u={responsive:!0,plugins:{legend:{position:"top"}}};return e.jsxs("div",{className:C.container,children:[e.jsx("h2",{className:C.title,children:" Общие сведения"}),e.jsx(q,{data:l,options:u})]})},S={"withdraws-page-table-head":"_withdraws-page-table-head_101ux_1","withdraws-page-table":"_withdraws-page-table_101ux_1"},Te=[{id:12304,customer:"Иман Ног",status:"Выиграно",sum:"190 000",date:new Date},{id:123204,customer:"Иман Ног",status:"Отказано",sum:"190 000",date:new Date},{id:1214,customer:"Самса Бургер",status:"В ожиданий",sum:"1 920 000",date:new Date}],ye=()=>{const[s,o]=c.useState([]),[l,u]=c.useState(Te),[d,j]=c.useState(null),[r,x]=c.useState(!1),[h,_]=c.useState(null),p=G(),T=a=>{const{checked:t}=a.target;o(t?l.map((m,v)=>v):[])},y=a=>{p(`/details/${a}`)},N=a=>{j(a),x(!0)},E=a=>{switch(a){case"Выиграно":return"success";case"В ожиданий":return"warning";case"Отказано":return"danger";default:return"gray"}},k=a=>t=>{const{checked:m}=t.target;o(m?[...s,a]:s.filter(v=>v!==a))},D=a=>{window.confirm("Вы уверены что хотите удалить этот объект?")&&u(l.filter(m=>m.id!==a))},M=a=>{u(l.map(t=>t.id===a.id?a:t))},$=()=>(h?l.filter(t=>t.status===h):l).map((t,m)=>e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(b,{size:"xs",checked:s.includes(m),onChange:k(m)})}),e.jsx(n.Td,{children:t.id}),e.jsx(n.Td,{children:t.customer}),e.jsx(n.Td,{children:e.jsx(K,{variantColor:E(t.status),children:t.status})}),e.jsx(n.Td,{children:`${t.sum}₸`}),e.jsx(n.Td,{children:Q(t.date,"dd MMMM, yyyy",{locale:Y})}),e.jsxs(n.Td,{style:{width:"50px",padding:"0"},children:[e.jsx("button",{onClick:()=>y(t.id),children:e.jsx(te,{})}),e.jsx("button",{onClick:()=>N(t),children:e.jsx(V,{})}),e.jsx("button",{onClick:()=>D(t.id),children:e.jsx(X,{})})]})]},m));return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:S["withdraws-page-table-head"],children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Поиск"}),e.jsx(w,{placeholder:"Выберите регион",data:[{value:"all",label:"Все"},{value:"kz",label:"Казахстан"},{value:"ru",label:"Россия"}]}),e.jsx(w,{placeholder:"Статус",data:[{value:"",label:"Все"},{value:"Выиграно",label:"Выиграно"},{value:"В ожиданий",label:"В ожиданий"},{value:"Отказано",label:"Отказано"}],onChange:a=>_(a),value:h||""})]}),e.jsx(J,{children:"Экспорт"})]}),e.jsx("div",{className:S["withdraws-page-table"],children:e.jsxs(n,{stickyHeader:!0,children:[e.jsx(n.Thead,{children:e.jsxs(n.Tr,{children:[e.jsx(n.Th,{children:e.jsx(b,{size:"xs",checked:s.length===l.length,indeterminate:s.length>0&&s.length<l.length,onChange:T})}),e.jsx(n.Th,{children:"ID заказа"}),e.jsx(n.Th,{children:"Покупатель"}),e.jsx(n.Th,{children:"Статус"}),e.jsx(n.Th,{children:"Сумма"}),e.jsx(n.Th,{children:"Дата"}),e.jsx(n.Th,{style:{width:"150px",padding:"0"},children:"Действие"})]})}),$()]})}),r&&d&&e.jsx(ae,{isOpen:r,onClose:()=>x(!1),item:d,onSave:M})]})},Ee=()=>e.jsxs(Z,{className:g["withdraws-page"],header:e.jsxs(e.Fragment,{children:[e.jsx(ee,{title:"Выплаты"}),e.jsx(se,{})]}),children:[e.jsxs("div",{className:g.content,children:[e.jsx("div",{className:g.chart,children:e.jsx(Se,{})}),e.jsx("div",{className:g.chart,children:e.jsx(je,{})})]}),e.jsx("div",{className:g[""],children:e.jsx(ye,{})})]});export{Ee as default};
